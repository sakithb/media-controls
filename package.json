{
  "type": "module",
  "scripts": {
    "format": "prettier --write .",
    "debug": "dbus-run-session gnome-shell --devkit --wayland",

    "build:clean": "rm -rf dist",
    "build:dirs": "mkdir -p dist/temp dist/builds",
    "build:copy": "rsync -a --exclude='assets' src/ dist/temp/",
    "build:resources": "glib-compile-resources assets/org.gnome.shell.extensions.mediacontrols.gresource.xml --target=dist/temp/org.gnome.shell.extensions.mediacontrols.gresource --sourcedir=assets",
    "build:prepare": "pnpm run clean && pnpm run dirs && pnpm run copy && pnpm run resources",
    "build:strip": "sed -i 's/const DEBUG = true;/const DEBUG = false;/' dist/temp/utils/common.js",
    "build:pack": "cd dist/temp && gnome-extensions pack -f -o ../builds/ --schema='../../assets/org.gnome.shell.extensions.mediacontrols.gschema.xml' --podir='../../assets/locale' --extra-source=helpers --extra-source=types --extra-source=org.gnome.shell.extensions.mediacontrols.gresource --extra-source=utils .",

    "build": "pnpm run prepare && pnpm run pack",
    "release": "pnpm run prepare && pnpm run strip && pnpm run pack",

    "ext:install": "gnome-extensions install --force dist/builds/mediacontrols@cliffniff.github.com.shell-extension.zip",
    "ext:uninstall": "gnome-extensions uninstall mediacontrols@cliffniff.github.com",
    "ext:enable": "gnome-extensions enable mediacontrols@cliffniff.github.com",
    "ext:disable": "gnome-extensions disable mediacontrols@cliffniff.github.com",
    "ext:prefs": "gnome-extensions prefs mediacontrols@cliffniff.github.com",

    "translations:extract": "xgettext --from-code=UTF-8 --add-comments --join-existing --keyword=_ --keyword=C_:1c,2 --language=Javascript --output=assets/locale/mediacontrols@cliffniff.github.com.pot $(find . -type f \\( -name '*.ui' -o -name '*.js' \\) -not -path './node_modules/*')",
    "translations:merge": "for po in assets/locale/*.po; do msgmerge -U \"$po\" assets/locale/mediacontrols@cliffniff.github.com.pot; done && rm -f assets/locale/*.po~",
    "translations": "pnpm run translations:extract && pnpm run translations:merge"
  },
  "devDependencies": {
    "@girs/adw-1": "1.9.0-4.0.0-beta.38",
    "@girs/clutter-13": "13.0.0-4.0.0-beta.38",
    "@girs/cogl-13": "13.0.0-4.0.0-beta.38",
    "@girs/gdk-4.0": "4.0.0-4.0.0-beta.38",
    "@girs/gdkpixbuf-2.0": "2.0.0-4.0.0-beta.38",
    "@girs/gio-2.0": "2.86.0-4.0.0-beta.38",
    "@girs/gjs": "4.0.0-beta.38",
    "@girs/glib-2.0": "2.86.0-4.0.0-beta.38",
    "@girs/gnome-shell": "49.0.1",
    "@girs/gobject-2.0": "2.86.0-4.0.0-beta.38",
    "@girs/graphene-1.0": "1.0.0-4.0.0-beta.38",
    "@girs/gtk-4.0": "4.20.1-4.0.0-beta.38",
    "@girs/meta-13": "13.0.0-4.0.0-beta.38",
    "@girs/pango-1.0": "1.57.0-4.0.0-beta.38",
    "@girs/shell-13": "13.0.0-4.0.0-beta.38",
    "@girs/soup-3.0": "3.6.5-4.0.0-beta.38",
    "@girs/st-13": "13.0.0-4.0.0-beta.38",
    "prettier": "^3.6.2"
  }
}

